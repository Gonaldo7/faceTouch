<html>
    <head>
        <title>H5调用手机摄像头</title>
        <!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"></script> -->
        <style>
            img, video {
                object-fit: cover;
            }
            *{
                margin: 0;
                padding: 0;
            }
            .box {
                width: 100%;
                height: 100vh;
                overflow: hidden;
                position: relative;
            }
            video {
                position: absolute;
                left: 0;
                top: 0;
                right: 0;
                bottom: 0;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div class="box">
            <video autoplay playsinline muted id="webcam"></video>
        </div>
        
        <script>
        async function setupWebcam() {
            return new Promise( ( resolve, reject ) => {
                const webcamElement = document.getElementById( "webcam" );
                webcamElement.width = window.innerWidth
                webcamElement.height = window.innerHeight
                const canvas = document.getElementById("canvas")
                canvas.width = window.innerWidth
                canvas.height = window.innerHeight
                const navigatorAny = navigator;
                navigator.getUserMedia = navigator.getUserMedia ||
                navigatorAny.webkitGetUserMedia || navigatorAny.mozGetUserMedia ||
                navigatorAny.msGetUserMedia;
                if( navigator.getUserMedia ) {
                    navigator.getUserMedia( { 
                            video: true,
                            'video':{ 'facingMode': {exact: "environment"} }  // 摄像头后置
                        },
                        stream => {
                            webcamElement.srcObject = stream;
                            webcamElement.addEventListener( 'loadeddata', resolve, false );
                        },
                    error => reject());
                }
                else {
                    reject();
                }
            });
        }
 
        (async () => {
            await setupWebcam();
        })();

        </script>
    </body>
</html>